<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GrAPPA:Graph Algorithms Pipeline for Pathway Analysis">
    <meta name="keywords" content="GrAPPA,Graph,Algorithms,Langston Lab,Yuping Lu">
    <meta name="author" content="Allan Yuping Lu">
    <link rel="shortcut icon" href="http://www.utk.edu/images/interface/favicon.gif">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://fonts.googleapis.com/css?family=Dancing+Script:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Caveat:400,700' rel='stylesheet' type='text/css'>
    
    <title>GrAPPA:Graph Algorithms Pipeline for Pathway Analysis</title>

    <!-- Bootstrap core CSS -->
    <link href="./script/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./script/index.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="./script/html5shiv.js"></script>
      <script src="./script/respond.min.js"></script>
    <![endif]-->

    <style>
     
      .contact {
        display: block;
        margin-bottom: 10px;
      }

      figure {
        margin-bottom: 10px;
      }

      figure img {
        max-width: 760px; 
      }

    </style>
  </head>

  <body>

    <div class="container">
      <div class="header">
        <ul class="nav nav-pills pull-right">
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#contact">Contact</a></li>
          <li class="active"><a href="help.html">Tutorial</a></li>
        </ul>
        <div class="pull-left" style="margin-right:6px">
          <img src="images/logo.jpg" height="66">
        </div>
        <div class="pull-left">
          <h3 class="text-muted1">GrAPPA</h3>
          <h5 class="text-muted"><b>Gr</b>aph <b>A</b>lgorithms <b>P</b>ipeline for <b>P</b>athway <b>A</b>nalysis</h5>
        </div>
        <div class="clearfix"></div>
      </div>

      <h3>What you will learn from this tutorial.</h3>

      <p>This tutorial covers typical usage of the different tools available under GrAPPA.  By the end of this tutorial, you should be familiar with how to upload .CEL data to GrAPPA, normalize the .CEL data and place the results in a tabular format, extract correlations from the data, and use the resulting correlated data on one of GrAPPA's graph decomposition algorithms.</p>

      <h3>Uploading Data</h3>

      <p>Although GrAPPA can be used to handle any data that can be placed in a tabular format, one of the most common uses for GrAPPA has been the analysis of biodata.  The <a class="reference" target="_blank" href="http://www.ncbi.nlm.nih.gov/geo/">Gene Expression Omnibus (GEO)</a> is a database which maintains a wealth of biodata that can be used on GrAPPA.  For this tutorial, we shall analyze .CEL data obtained via GEO from a study on human patients with cerebral palsy.  These files can be found <a target="_blank" href="http://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSM296829">here</a>.</p>

      <p>Once you have downloaded the .CEL files, you will need to upload them for use on GrAPPA.  To upload the files, Click on <b>Upload File</b> under the <b>Get Data</b> tab on the left-hand side <b>Tools</b> panel.  This will display the upload file screen in the center panel.  Under <b>File Format</b>, be sure to set the format of the file to .CEL.  Then, click on the <b>Choose local file</b> button to search for the files on your computer or upload from url.  Once a .CEL file has been specified, click on the <b>Start</b> button at the bottom.  Repeat until all the .CEL files needed are uploaded.  For this tutorial, I simply uploaded the first five .CEL files from the study.</p>

      <figure>
        <img src="images/9.png" class="img-rounded">
        <aside>Uploading .CEL files</aside>
      </figure>

      <p>GrAPPA supports many different filetypes, not just .CEL files.  Here is a list of supported types:</p>
      <blockquote>
        <ul>
          <li>bcl - A list of bicliques.  Output by biclique.</li>
          <li>bel - A bipartite edgelist. Compare el and kel. Used by biclique.</li>
          <li>bmat - A binary matrix. Used by biclique.</li>
          <li>cel - A CEL format produced by microarray software.</li>
          <li>cl - A list of cliques produced by paraclique, maximum clique, or maximal clique.</li>
          <li>el - A graph edgelist format. All lines are 2 columns separated by a tab character. The first line consists of the number of vertices and the number of edges. All following lines contain two vertex labels denoting an undirected edge between them.</li>
          <li>gv - GraphViz format used as input to the graphviz tools.</li>
          <li>kcl - A list of k-partite cliques. Outputted by k-partite clique enumeration.</li>
          <li>kel - A k-partite edgelist. The only differences between a normal edgelist is that each group has its own size and the vertices must use contiguous integer labels.</li>
          <li>kmat - A k-partite matrix. See the documentation for k-partite clique enumeration for more information. Allows the use of arbitrary string labels.</li>
          <li>mat - A tab-delimited matrix file, with a header for the first row and first column.</li>
          <li>tab - A tab-delimited table format. Short for "tabular".</li>
          <li>txt - A plain ASCII text file</li>
          <li>wel - A weighted edgelist. Similar to el, except that each edge ends with a tab and a weight. Most of the tools available here expect floating point values between 0.0 and 1.0 as weights.</li>
        </ul>
      </blockquote>

      <p>Notice that GrAPPA assigns a default name.  Perhaps you wish to rename the file so it would have a more descriptive name.  To do this, click on the <em>pencil</em> icon (next to the <em>eyeball</em> icon) of the file you wish to edit.  A screen will appear in the middle panel labelled <b>Edit Attributes</b>.  The name field appears at the top. Be sure to <b>Save</b> your changes once you are done editing.</p>

      <figure>
        <img src="images/2.png" width="250" class="img-rounded">
        <aside>Default names</aside>
      </figure>

      <figure>
        <img src="images/3.png" width="550" class="img-rounded">
        <aside>Changing .CEL file names</aside>
      </figure>

      <p>Tip: Some processes, including uploading files, may take a bit of time.  If a process doesn't complete immediately, periodically click on the <b>Refresh</b> button to update the status of each process.  This is especially useful for some time consuming tasks, such as correlation and graph decomposition.</p>

      <hr/>

      <h3>Normalization</h3>

      <figure>
        <img src="images/4.png" class="img-rounded">
        <aside>Normalize</aside>
      </figure>

      <p>Now that we have uploaded our .CEL data, we need to compile the data into a single tabular file and normalize the values for further analysis.  First, we must specify the microarrays (.CEL files) that we wish to compile into a single .TAB file.  We will go ahead and compile all of the .CEL files we have uploaded.  First, click on <b>Insert Microarray</b>.  This should add a new microarray with the options to select the input (.CEL) file used or to delete the microarray.  Select the first .CEL file uploaded.  Add new microarrays for the remaining .CEL files.</p>

      <figure>
        <img src="images/5.png" class="img-rounded">
        <aside>Insert Microarry</aside>
      </figure>

      <p>After the microarrays have been added, we must specify the normalization method we wish to use.  We may do this under the <b>Methods</b> box.  The methods available are either Robust Multiarray Analysis (RMA), or MAS5.  A precise definition of these normalization algorithms is beyond the scope of this tutorial.  So, for our purposes, we will simply stick with RMA.</p>

      <p>Once you have compiled the microarrays and selected a normalization method to use, click on the <b>Execute</b> button.</p>

      <p>After normalization has completed and the .TAB file has been created, you may view the contents of the file.  To view the contents of a newly created file, click on the <em>eyeball</em> icon directly to the right of the name of the file.</p>

      <figure>
        <img src="images/6.png" class="img-rounded">
        <aside>View Content</aside>
      </figure>

      <hr/>

      <h3>Correlation</h3>

      <p>Now that we have compiled and normalized our data, we will need to find correlations within our data in order to construct a graph.  To do this, click on <b>Pearson Correlation</b> under the <b>Correlation Matrices</b> tab.  As our input, we will use the normalized .TAB file we created previously.  However, since there are a lot of row variables included in the .TAB file, and many of these variables appear to be highly correlated, for the purposes of this tutorial, I have truncated the .TAB file to only include the first 1000 normalized variables.  Running correlation analysis on the original file would take a relatively large amount of time and possibly create a huge file.  Be careful when running correlation analysis!</p> 

      <figure>
        <img src="images/7.png" class="img-rounded">
        <aside>Correlation analysis</aside>
      </figure>
      
      <p>Under output, we have three choices, either a frequency histogram, a weighted edgelist (.WEL file), or an un-weighted edgelist (.EL file).  The frequency histogram is simply a text file including the number of variables that fall within a correlation interval (these intervals range from -1.0 to 1.0 in increments of 0.01).  The weighted edgelist is a DIMACS representation of a graph with undirected, weighted edges.  The un-weighted edgelist is the same, except the edges have no weights.  Since we are interested in constructing a graph, but we do not need the weights of the correlations, we shall choose an un-weighted edgelist as our output.</p>

      <p>For weighted and un-weighted edgelists we have a few additional options.  We can change the threshold, choose which types of correlations we consider (only positive, only negative, or all), relabel the vertices of the graph (the row variables of our .TAB file) as integers, and choose to use correlation p-values instead of correlation values to construct edges.  For our purposes, we shall simply use the default values of these options.  Click on <b>Execute</b> to run correlation analysis on the .TAB file, which will create a .EL file.</p>

      <p>If you are not sure which threshold to use, you can use <b>spectral threshold</b> under the <b>Data Preparation</b> tab. For those interested, the correlation techniqued used for our analysis is <a class="reference" target="_blank" href="http://en.wikipedia.org/wiki/Pearson_correlation">Pearson correlation</a>.</p>

      <hr/>

      <h3>Graph Decomposition</h3>

      <p>There are many different graph decomposition tools available under GrAPPA.  Note that all of these tools are used to solve <a class="reference" target="_blank" href="http://en.wikipedia.org/wiki/NP-hard">NP-hard</a> problems, which means that the computation time needed grows exponentially with the size of the input.  Take this in to account when you use GrAPPA!</p>

      <p>For this tutorial, we shall try to find all paracliques included in the graph we had constructed earlier.  A <em>paraclique</em> is a densely-connected subgraph that is almost a clique, but is missing a few edges.  Paraclique analysis is especially useful when dealing with noisy data.</p>  

      <p>First, click <b>Paraclique</b> under the <b>Clique Computation</b> tab. Then, for <b>Input</b> choose the un-weighted edgelist file created during correlation analysis. The other options for paraclique include the <b>Run Type</b>, <b>Paraclique Type</b>, <b>Glom Factor</b>, <b>Minimum Base Clique Size</b>, <b>Minimum Paraclique Size</b>, and <b>Maximum Paracliques to Report</b>.  For our purposes, we shall keep these options as they are.  Click on <b>Execute</b> to create a file containing a list of paracliques according to the options specified.</p>

      <figure>
        <img src="images/8.png" class="img-rounded">
        <aside>Extracting paracliques from the graph</aside>
      </figure>

      <p>Summary of paraclique options:</p>
      <blockquote>
        <ul>
          <li><b>Run Type:</b> Parallel runs are sent to Newton to be processed while serial runs are handled locally. The process of sending jobs to Teragrid introduces delays that will not be experienced by serial jobs. As such it is recommended that you run small/fast jobs as serial and large/long jobs as parallel.</li>
          <li><b>Original vs Accelerated Paraclique:</b> For original paraclique, the glom factor is fixed to the value specified, and growth stops when no more vertices can be added. For accelerated paraclique, the glom factor grows by one for each pass through the graph, and growth stops when the paraclique meets the aggressiveness ratio (defined below).</li>
          <li><b>Glom Factor:</b> If a potential vertex is disconnected from less than or equal to &lt;glom factor&gt; vertices in the existing paraclique, it will be added to the paraclique.</li>
          <li><b>Aggressiveness Ratio:</b> Controls the growth of accelerated paracliques. When the current glom factor is &lt;agg ratio&gt; percent or more of the paraclique size, growth is halted.</li>
          <li><b>Overlap:</b> With overlap set, paracliques are grown as with the non-overlapping algorithm, but then a second pass is done to add in previously removed vertices (ie vertices used in other paracliques).</li>
          <li><b>Maximum Paracliques to report:</b> The maximum number of paracliques to report. This is useful for restricting the output size and runtime. Use 0 to report unlimited paracliques.</li>
        </ul>
      </blockquote> 

      <p>Note that the graph created during correlation analysis can also use the <em>Maximum Clique</em>, <em>Maximal Clique</em>, and <em>Dominating Set</em> tools, since these all take .EL files as input. 

      <hr/>

      <h3>Visualization</h3>

      <p>GrAPPA contains tools that can convert files to the GraphViz .GV format as well as display these graphs using a preferred layout (e.g. dot, neato, fdp, circo and twopi).  However, care must be given when dealing with graph visualization, as very large graphs can take a very long time to generate formatted pictures.  If you know that the results of graph decomposition yield a very large graph (or series of graphs), it may be wise to download the graph and use more sophisticated tools to generate very large visualizations.</p>  

      <hr/>

      <h3>Contact us</h3>
      <p>Many tools are not covered in this tutorial. If you have any questions, feel free to contact us.
      <a href="mailto:grappa@utk.edu" title="Email us" class="contact">Email us: grappa@utk.edu</a></p>

      <div class="footer">
        <p>&copy; University of Tennessee 2015. Powered by <a href="http://getbootstrap.com/">Twitter Bootstrap</a> Last updated: 2015-07-11</p>
      </div>

    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  </body>
</html>
